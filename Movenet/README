# Installation

In your conda env, install the following:

pip install paho-mqtt
pip install tensorflow
pip install --upgrade tensorflow-hub
pip install -q git+https://github.com/tensorflow/docs
pip install --upgrade tensorflow-estimator==2.6.0

Download movenet thunder and/or lightning model:

https://tfhub.dev/google/movenet/singlepose/thunder/4
https://tfhub.dev/google/movenet/singlepose/lightning/4

Make sure to add the model to the Movenet/models directory.

# Files

1. position_tracking.py

Main script for detecting obstacle navigation (duck/jump)
and sending data to Unity over MQTT.

Usage:
python3 position_tracking.py --no-mqtt -m [thunder|lightning]

2. movenet.py

Movenet class for detecting pose keypoints using tensorflow movenet

3. publisher.py

MQTT publisher class

Run example: python3 publisher.py

4. movement_recognizer.py

Stores previous $max_frames keypoints and outputs whether player is
jumping, ducking, out of frame, or stationary.

5. keypoints_filter.py

Apply one-euro filter to x and y coords in keypoints.

6. one_euro_filter.py

One-euro filter class.

7. enums.py

Enums for player position and mapping from body part to keypoint index.

8. collect_data.py

Collect data for tuning position tracking model.

Usage: python3 collect_data.py -m [thunder|lightning] -f file_name.csv

# Resources

1. Download movenet thunder model: https://tfhub.dev/google/movenet/singlepose/thunder/4
2. Download movenet lightning model: https://tfhub.dev/google/movenet/singlepose/lightning/4
3. Example code: https://github.com/nicknochnack/MoveNetLightning
4. Tensorflow-js: https://github.com/tensorflow/tfjs-models/tree/master/pose-detection
5. https://colab.research.google.com/github/tensorflow/hub/blob/master/examples/colab/movenet.ipynb
6. https://github.com/tensorflow/tfjs-models/blob/master/pose-detection/src/movenet/detector.ts
7. browser movenet demo: https://storage.googleapis.com/tfjs-models/demos/pose-detection/index.html?model=movenet
8. https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/g3doc/tutorials/pose_classification.ipynb
9. https://github.com/tensorflow/examples/blob/master/lite/examples/pose_estimation/raspberry_pi/ml/movenet.py
